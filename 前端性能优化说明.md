# å‰ç«¯æ€§èƒ½ä¼˜åŒ–è¯´æ˜

## ğŸ“‹ ä¼˜åŒ–æ¦‚è¿°

æœ¬æ¬¡å‰ç«¯æ€§èƒ½ä¼˜åŒ–ä¸»è¦é’ˆå¯¹æ‚¨æåˆ°çš„"ç¬¬ä¸€æ¬¡æ‰“å¼€é¦–é¡µå¾ˆæ…¢ï¼Œè€Œä¸”è¿˜ä¼šé”™è¯¯"çš„é—®é¢˜ï¼Œè¿›è¡Œäº†å…¨é¢çš„æ€§èƒ½ä¼˜åŒ–ã€‚

## ğŸš€ ä¸»è¦ä¼˜åŒ–æªæ–½

### 1. èµ„æºåŠ è½½ä¼˜åŒ–

#### é¢„åŠ è½½å…³é”®èµ„æº
```html
<!-- é¢„åŠ è½½å…³é”®CSSå’ŒJS -->
<link rel="preload" href="/static/styles.css" as="style">
<link rel="preload" href="/static/js/main.js" as="script">
```

#### DNSé¢„è§£æ
```html
<!-- é¢„è§£æå¤–éƒ¨åŸŸå -->
<link rel="dns-prefetch" href="//cdn.jsdelivr.net">
<link rel="dns-prefetch" href="//cdnjs.cloudflare.com">
```

### 2. JavaScriptä¼˜åŒ–

#### å»¶è¿ŸåŠ è½½éå…³é”®JS
```javascript
// é¡µé¢åŠ è½½å®Œæˆåå†åŠ è½½main.js
window.addEventListener('load', function() {
    var script = document.createElement('script');
    script.src = "/static/js/main.js";
    script.async = true;
    document.head.appendChild(script);
});
```

#### é˜²æŠ–å’ŒèŠ‚æµä¼˜åŒ–
```javascript
// é˜²æŠ–å‡½æ•°
function debounce(func, wait) {
    var timeout;
    return function executedFunction() {
        var later = function() {
            clearTimeout(timeout);
            func();
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}
```

### 3. CSSä¼˜åŒ–

#### å…³é”®CSSå†…è”
```html
<style>
/* å…³é”®æ¸²æŸ“è·¯å¾„CSS */
.navbar { background-color: #337ab7; }
.container { position: relative; z-index: 1; }
</style>
```

#### å‡å°‘é‡ç»˜å’Œé‡æ’
```css
.navbar {
    transform: translateZ(0);
    will-change: transform;
}
```

### 4. å›¾ç‰‡ä¼˜åŒ–

#### æ‡’åŠ è½½
```javascript
// å›¾ç‰‡æ‡’åŠ è½½
if ('IntersectionObserver' in window) {
    var imageObserver = new IntersectionObserver(function(entries) {
        entries.forEach(function(entry) {
            if (entry.isIntersecting) {
                var img = entry.target;
                img.src = img.dataset.src;
                img.classList.remove('lazy');
            }
        });
    });
}
```

### 5. æ€§èƒ½ç›‘æ§

#### å®æ—¶æ€§èƒ½ç›‘æ§
```javascript
// é¡µé¢åŠ è½½æ€§èƒ½ç›‘æ§
window.addEventListener('load', () => {
    const perfData = performance.getEntriesByType('navigation')[0];
    console.log('é¡µé¢åŠ è½½æ—¶é—´:', perfData.loadEventEnd - perfData.loadEventStart);
});
```

## ğŸ“ æ–°å¢æ–‡ä»¶è¯´æ˜

### ä¼˜åŒ–åçš„æ¨¡æ¿æ–‡ä»¶
- `app/templates/base_optimized.html` - ä¼˜åŒ–åçš„åŸºç¡€æ¨¡æ¿
- `app/templates/index_optimized.html` - ä¼˜åŒ–åçš„é¦–é¡µæ¨¡æ¿

### æ€§èƒ½ä¼˜åŒ–èµ„æº
- `app/static/js/main_optimized.js` - ä¼˜åŒ–åçš„ä¸»JSæ–‡ä»¶
- `app/static/js/performance.js` - æ€§èƒ½ç›‘æ§JSæ–‡ä»¶
- `app/static/css/performance.css` - æ€§èƒ½ä¼˜åŒ–CSSæ–‡ä»¶

### é…ç½®æ–‡ä»¶
- `app/performance_config.py` - æ€§èƒ½ä¼˜åŒ–é…ç½®æ–‡ä»¶
- `test_performance.py` - æ€§èƒ½æµ‹è¯•è„šæœ¬

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### 1. åº”ç”¨ä¼˜åŒ–æ¨¡æ¿

å°†ä¼˜åŒ–åçš„æ¨¡æ¿åº”ç”¨åˆ°æ‚¨çš„ç³»ç»Ÿä¸­ï¼š

```bash
# å¤‡ä»½åŸæ–‡ä»¶
cp app/templates/base.html app/templates/base_backup.html
cp app/templates/index.html app/templates/index_backup.html

# åº”ç”¨ä¼˜åŒ–æ¨¡æ¿
cp app/templates/base_optimized.html app/templates/base.html
cp app/templates/index_optimized.html app/templates/index.html
```

### 2. åº”ç”¨ä¼˜åŒ–èµ„æº

```bash
# å¤‡ä»½åŸJSæ–‡ä»¶
cp app/static/js/main.js app/static/js/main_backup.js

# åº”ç”¨ä¼˜åŒ–JS
cp app/static/js/main_optimized.js app/static/js/main.js
```

### 3. æµ‹è¯•æ€§èƒ½

```bash
# è¿è¡Œæ€§èƒ½æµ‹è¯•
python test_performance.py

# ä¿å­˜åŸºå‡†æ€§èƒ½
python test_performance.py --baseline

# æµ‹è¯•ä¼˜åŒ–æ•ˆæœ
python test_performance.py
```

## ğŸ“Š é¢„æœŸæ€§èƒ½æå‡

### åŠ è½½æ—¶é—´ä¼˜åŒ–
- **é¦–é¡µåŠ è½½æ—¶é—´**: é¢„è®¡å‡å°‘ 40-60%
- **èµ„æºåŠ è½½æ—¶é—´**: é¢„è®¡å‡å°‘ 30-50%
- **é¦–æ¬¡å†…å®¹ç»˜åˆ¶**: é¢„è®¡å‡å°‘ 50-70%

### ç”¨æˆ·ä½“éªŒæ”¹å–„
- âœ… å‡å°‘é¡µé¢åŠ è½½é”™è¯¯
- âœ… æå‡é¡µé¢å“åº”é€Ÿåº¦
- âœ… æ”¹å–„ç§»åŠ¨ç«¯ä½“éªŒ
- âœ… å‡å°‘å†…å­˜ä½¿ç”¨

## ğŸ” æ€§èƒ½ç›‘æ§

### æµè§ˆå™¨å¼€å‘è€…å·¥å…·
1. æ‰“å¼€å¼€å‘è€…å·¥å…· (F12)
2. åˆ‡æ¢åˆ° Network æ ‡ç­¾
3. åˆ·æ–°é¡µé¢æŸ¥çœ‹åŠ è½½æ—¶é—´
4. åˆ‡æ¢åˆ° Performance æ ‡ç­¾æŸ¥çœ‹è¯¦ç»†æ€§èƒ½æ•°æ®

### æ€§èƒ½æŒ‡æ ‡
- **First Contentful Paint (FCP)**: < 1.5ç§’
- **Largest Contentful Paint (LCP)**: < 2.5ç§’
- **First Input Delay (FID)**: < 100æ¯«ç§’
- **Cumulative Layout Shift (CLS)**: < 0.1

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¦‚æœå‡ºç°é—®é¢˜

1. **æ¢å¤åŸæ–‡ä»¶**:
```bash
cp app/templates/base_backup.html app/templates/base.html
cp app/templates/index_backup.html app/templates/index.html
cp app/static/js/main_backup.js app/static/js/main.js
```

2. **æ£€æŸ¥æ§åˆ¶å°é”™è¯¯**:
   - æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·
   - æŸ¥çœ‹ Console æ ‡ç­¾çš„é”™è¯¯ä¿¡æ¯

3. **æ£€æŸ¥ç½‘ç»œè¯·æ±‚**:
   - æŸ¥çœ‹ Network æ ‡ç­¾
   - ç¡®è®¤æ‰€æœ‰èµ„æºéƒ½èƒ½æ­£å¸¸åŠ è½½

### å¸¸è§é—®é¢˜

#### Q: é¡µé¢æ ·å¼å¼‚å¸¸
A: æ£€æŸ¥CSSæ–‡ä»¶æ˜¯å¦æ­£ç¡®åŠ è½½ï¼Œç¡®ä¿è·¯å¾„æ­£ç¡®

#### Q: JavaScriptåŠŸèƒ½å¤±æ•ˆ
A: æ£€æŸ¥JSæ–‡ä»¶æ˜¯å¦æ­£ç¡®åŠ è½½ï¼ŒæŸ¥çœ‹æ§åˆ¶å°é”™è¯¯

#### Q: å›¾ç‰‡ä¸æ˜¾ç¤º
A: æ£€æŸ¥å›¾ç‰‡è·¯å¾„ï¼Œç¡®è®¤æ‡’åŠ è½½åŠŸèƒ½æ­£å¸¸

## ğŸ“ˆ è¿›ä¸€æ­¥ä¼˜åŒ–å»ºè®®

### 1. æœåŠ¡å™¨ç«¯ä¼˜åŒ–
- å¯ç”¨Gzipå‹ç¼©
- é…ç½®æµè§ˆå™¨ç¼“å­˜
- ä½¿ç”¨CDNåŠ é€Ÿ

### 2. æ•°æ®åº“ä¼˜åŒ–
- ä¼˜åŒ–æŸ¥è¯¢è¯­å¥
- æ·»åŠ æ•°æ®åº“ç´¢å¼•
- ä½¿ç”¨è¿æ¥æ± 

### 3. ç¼“å­˜ç­–ç•¥
- å®ç°Redisç¼“å­˜
- æ·»åŠ é¡µé¢ç¼“å­˜
- ä¼˜åŒ–é™æ€èµ„æºç¼“å­˜

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨åº”ç”¨ä¼˜åŒ–è¿‡ç¨‹ä¸­é‡åˆ°ä»»ä½•é—®é¢˜ï¼Œè¯·ï¼š

1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ä¿¡æ¯
2. è¿è¡Œæ€§èƒ½æµ‹è¯•è„šæœ¬è·å–è¯¦ç»†æŠ¥å‘Š
3. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„æ•…éšœæ’é™¤éƒ¨åˆ†
4. å¦‚æœ‰éœ€è¦ï¼Œå¯ä»¥éšæ—¶æ¢å¤åˆ°åŸå§‹æ–‡ä»¶

---

**æ³¨æ„**: å»ºè®®åœ¨æµ‹è¯•ç¯å¢ƒä¸­å…ˆåº”ç”¨è¿™äº›ä¼˜åŒ–ï¼Œç¡®è®¤æ•ˆæœåå†åº”ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒã€‚ 